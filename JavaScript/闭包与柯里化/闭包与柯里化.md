# 闭包与柯里化

## 闭包

在 JavaScript 中，根据词法作用域的规则，内部函数总是可以访问其外部函数中声明的变量。  
当通过调用一个外部函数返回一个内部函数后，即使该外部函数已经执行结束了，但是内部函数引用外部函数的变量仍旧存储在内存中，我们把这些变量的集合称为闭包。  
简单来说：

**·在函数 A 中还有函数 B，函数 B 调用了函数 A 中的变量，那么函数 B 就称为函数 A 的闭包。**

```JavaScript
function foo(){
    let num = 0;
    return function(){
        num++;
        console.log(num);
    };
}
const f = foo();
f();            //1
f();            // 2

// 这个num就在返回函数中存储，每次都会++1；
```

## 闭包的好处与坏处

好处：

1. 缓存。将变量隐藏起来不被 GC 回收。
2. 实现柯里化，利用闭包特性完成柯里化。

坏处：

1. 内存消耗，闭包产生的变量无法被销毁。
2. 性能问题，由于闭包内部变量优先级高于外部变量，所以需要多查找作用域链的一个层次，一定程度影响查找速度。

## 柯里化

柯里化是把接收多个参数的函数转变为单一参数的函数，并且返回接收余下的参数且返回结果的新函数的技术。  
**简单来说：**

1. 通过闭管理
2. 支持链式调用
3. 每次运行返回一个`function`
   即：通过将多个参数换成一个参数，每次运行返回新函数的技术。

### 柯里化举例：

```JavaScript
// 普通的add函数
function add(x,y){
    return x + y;
}

// 柯里化函数
function curryingAdd(x){
    return function(y){
        return x + y;
    };
}

curryingAdd(x)(y);
```

### 柯里化的好处

1. 参数复用
2. 提前确认
3. 延迟运行
